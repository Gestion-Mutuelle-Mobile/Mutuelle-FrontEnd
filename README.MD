# ğŸ“š Documentation Technique ComplÃ¨te des Outils MÃ©tier, Types, Services, Hooks, Contextes, Utils de l'App "Mutuelle ENSPY"

> **But** : Ce document sert d'inventaire exhaustif et de rÃ©fÃ©rence pour tous les outils mÃ©tiers (types, hooks, services, contextes, utils, constantes) implÃ©mentÃ©s dans le projet.  

> **Stack concernÃ©e** : React Native (Expo) â€“ TypeScript â€“ React Query â€“ AsyncStorage/SecureStore â€“ Axios.

---

## ğŸ“ Table des MatiÃ¨res

1. [ğŸŒ³ Structure de Dossier](#structure-de-dossier)
2. [ğŸ”— Constants (api, config, strings)](#constants)
3. [âœï¸ Types TypeScript](#types)
4. [ğŸ”Œ Services API](#services)
5. [ğŸª Hooks MÃ©tier](#hooks)
6. [ğŸŒ Context Providers](#contexts)
7. [ğŸ§° Utils & Helpers](#utils)
8. [ğŸ“ Notes de Style et Patterns](#notes-de-style)

---

## ğŸŒ³ Structure de Dossier

```
src/
â”œâ”€â”€ assets/          # Images, icÃ´nes, polices
â”œâ”€â”€ components/      # Composants UI rÃ©utilisables
â”œâ”€â”€ constants/       # api.ts, config.ts, strings.ts
â”œâ”€â”€ context/         # AppContext, AuthContext, ThemeContext
â”œâ”€â”€ hooks/           # Tous les hooks mÃ©tiers (voir section dÃ©diÃ©e)
â”œâ”€â”€ navigation/      # Navigators React Navigation
â”œâ”€â”€ screens/         # Pages principales (admin, membre, auth, partagÃ©)
â”œâ”€â”€ services/        # AccÃ¨s API centralisÃ© (axios)
â”œâ”€â”€ styles/          # Styles globaux
â”œâ”€â”€ types/           # Tous les modÃ¨les TypeScript ultra complets
â””â”€â”€ utils/           # Helpers, formatters, validators...
```

---

## ğŸ”— 1. Constants

### `constants/api.ts`
- **API_BASE_URL** : URL de base de l'API backend.
- **API_ENDPOINTS** : Objet listant tous les endpoints de l'API, par domaine.
    - `login`, `refresh`, `users`, `members`, `loans`, `assistances`, `renflouements`, etc.
    - Les endpoints dynamiques sont des fonctions (`memberDetails: (id) => ...`).

### `constants/config.ts`
- **COLORS** : Palette de couleurs globale (bleu/blanc).
- **PIN_LENGTH**, **DEFAULT_SESSION_AGAPE** : ParamÃ¨tres mÃ©tier.
- **DATE_FORMATS** : Formats de date pour affichage/API.
- **PAGINATION** : Taille de page par dÃ©faut.
- **ASYNC_STORAGE_KEYS** : ClÃ©s pour AsyncStorage/SecureStore.

### `constants/strings.ts`
- **STRINGS** : Textes statiques rÃ©utilisables (ui, erreurs, titres...).

---

## âœï¸ 2. Types TypeScript

Tous les types sont **fidÃ¨les Ã  la structure de l'API** et aux besoins du front.  
Chaque type est documentÃ© dans le fichier correspondant de `types/`.

- **user.types.ts** : Utilisateur, rÃ´le, profil complet backend.
- **member.types.ts** : Membre (enseignant), statut, donnÃ©es financiÃ¨res dÃ©taillÃ©es (inscription, solidaritÃ©, Ã©pargne, emprunt, renflouement, rÃ©sumÃ© financier).
- **loan.types.ts** : Emprunt, statut (EN_COURS, REMBOURSE, EN_RETARD), dÃ©tails remboursement.
- **saving.types.ts** : Transaction d'Ã©pargne, type (DEPOT, RETRAIT_PRET, INTERET).
- **solidarity.types.ts** : Paiement solidaritÃ© (fonds social), mouvements fonds social.
- **renflouement.types.ts** : Renflouement, paiements associÃ©s, causes.
- **assistance.types.ts** : Assistance accordÃ©e, type, statut.
- **exercise.types.ts** : Exercice annuel, statut, info fonds social.
- **session.types.ts** : Session mensuelle, statut, nombre membres, etc.
- **config.types.ts** : Configuration globale de la mutuelle.
- **dashboard.types.ts** : Dashboard adminÂ : totaux, alertes, paiements, etc.

Tous les types sont exhaustivement dÃ©finis et **aucun ne doit Ãªtre modifiÃ© sans impact sur la cohÃ©rence**.

---

## ğŸ”Œ 3. Services API

### Pattern gÃ©nÃ©ral

- **BasÃ©s sur axios** : Chaque service correspond Ã  une entitÃ© mÃ©tier (auth, member, loan, etc.)
- **Importent les types dÃ©finis dans /types**
- **EntiÃ¨rement typÃ©s** (entrÃ©e, sortie).

### Exemples de signatures (toutes les mÃ©thodes sont async) :

#### Auth
```typescript
login(email: string, password: string): Promise<{ tokens: { access: string, refresh: string }, user: User }>
refreshToken(refresh: string): Promise<{ access: string, refresh: string }>
logout(): Promise<void>
getStoredAccessToken(): Promise<string|null>
getStoredUser(): Promise<User|null>
updateProfile(updates: Partial<User>, accessToken: string): Promise<User>
changePassword(old: string, new: string, confirm: string, token: string): Promise<void>
```

#### User
```typescript
fetchUsers(accessToken: string): Promise<User[]>
fetchUserById(id: string, accessToken: string): Promise<User>
createUser(user: Partial<User>, accessToken: string): Promise<User>
```

#### Member
```typescript
fetchMembers(accessToken: string, params?): Promise<Member[]>
fetchMemberById(id: string, accessToken: string): Promise<Member>
fetchMemberFullData(id: string, accessToken: string): Promise<any> // DonnÃ©es financiÃ¨res dÃ©taillÃ©es
```

#### Dashboard
```typescript
fetchAdminDashboard(accessToken: string): Promise<DashboardData>
```

#### Loan
```typescript
fetchLoans(accessToken: string, params?): Promise<Loan[]>
fetchLoanById(id: string, accessToken: string): Promise<Loan>
createLoan(payload, accessToken: string): Promise<Loan>
fetchRepayments(accessToken: string, params?): Promise<Repayment[]>
createRepayment(payload, accessToken: string): Promise<Repayment>
```

#### ... (mÃªme logique pour savings, solidarity, renflouement, assistance, config)

**Tout changement sur les types/services doit se faire en cohÃ©rence avec la doc API fournie.**

---

## ğŸª 4. Hooks MÃ©tier

### Pattern gÃ©nÃ©ral

- **BasÃ©s sur React Query** (`useQuery`, `useMutation`)
- **TypÃ©s strictement** (types importÃ©s)
- **Utilisent les services correspondants**
- **Centralisent la logique mÃ©tier cÃ´tÃ© front** (ex: refresh automatique, invalidation des queries, accÃ¨s token, etc.)

### Hooks principaux

- `useAuth` : login/logout, utilisateur courant, erreurs.
- `usePin` : gestion du code PIN local.
- `useConfig` : configuration globale de la mutuelle.
- `useDashboard` : dashboard admin.
- `useMembers`, `useMemberDetail`, `useMemberFinance`
- `useLoans`, `useLoanDetail`, `useCreateLoan`, `useRepayments`, `useCreateRepayment`
- `useSavings`, `useCreateSaving`
- `useSolidarityPayments`, `useCreateSolidarityPayment`, `useSocialFundCurrent`
- `useRenflouements`, `useCreateRenflouementPayment`, `useRenflouementStats`
- `useAssistances`, `useCreateAssistance`, `useUpdateAssistance`, `useAssistanceTypes`
- `useUsers`, `useUserDetail`, `useCreateUser`

**Chacun de ces hooks encapsule la logique d'appel service, la gestion du token, et le typage.**

---

## ğŸŒ 5. Context Providers

### **AuthContext**
- Donne accÃ¨s rapide Ã  lâ€™utilisateur courant, login/logout dans tout lâ€™arbre React.

### **ThemeContext**
- Fournit la palette de couleurs et la configuration thÃ¨me (mÃªme si pas de dark mode).

### **AppContext**
- Centralise lâ€™Ã©tat â€œapp loadingâ€, les toasts/notifications globales.

**Tous les contextes sont strictement typÃ©s et exposent des hooks custom (`useAuthContext`, `useTheme`, `useAppContext`).**

---

## ğŸ§° 6. Utils & Helpers

### Fichiers principaux

- **dateUtils.ts** : manipulation dates (isToday, isSameMonth, etc.)
- **formatters.ts** : formatage montants, dates, pourcentages.
- **helpers.ts** : helpers transversaux sur les statuts, labels, etc.
- **numberUtils.ts** : arrondis, calculs sur les nombres.
- **stringUtils.ts** : normalisation, recherche, manipulation de chaÃ®nes.
- **validators.ts** : validation email, phone, required, positif, etc.

### Exemples dâ€™utilitaires (signature)

```typescript
formatMoney(amount: number, currency?: string): string
formatDate(date: string|Date, withHour?: boolean): string
isEmail(email: string): boolean
isPhone(phone: string): boolean
isRequired(val: any): boolean
normalizeSearch(text: string): string
getMemberStatusLabel(status: MemberStatus): string
getLoanStatusLabel(status: LoanStatus): string
```

Toutes les fonctions sont **pures**, stateless, et ne touchent jamais au rÃ©seau/local storage.

---

## ğŸ“ 7. Notes de Style et Patterns

- **Aucune donnÃ©e â€œmockÃ©eâ€** nâ€™est gÃ©nÃ©rÃ©e dans les hooks/services.
- **Aucune fonction non documentÃ©e** ou non typÃ©e nâ€™est autorisÃ©e.
- **Tout ajout de fonctionnalitÃ©** (hook, service, type, utilitaire) doit Ãªtre documentÃ© ici, avec la signature dâ€™entrÃ©e/sortie, le type, et le comportement mÃ©tier attendu.
- **Le code du projet est strictement alignÃ© sur la doc API** (pas dâ€™invention ni de duplication dâ€™appels).
- **Les composants UI** ne doivent pas implÃ©menter de logique mÃ©tierÂ : ils sont branchÃ©s sur les hooks/services/utils/context dÃ©crits ici.

---

## ğŸ“Œ SynthÃ¨se

- **Ce document fait foi** pour toute IA ou dev :  
  - Pour connaÃ®tre lâ€™existant,  
  - Pour Ã©viter la redondance,  
  - Pour garantir la cohÃ©rence mÃ©tier,  
  - Pour accÃ©lÃ©rer le design systÃ¨me et la rÃ©alisation des Ã©crans.
- **Toute modification doit Ãªtre rÃ©percutÃ©e ici** (outil de rÃ©fÃ©rence unique du projet).

---

**Fin de la documentation technique des outils de la Mutuelle ENSPY.**


# DOCUMENTATION VERSION DETAILLEE :

# ğŸ“š Documentation Technique Ultra-ComplÃ¨te â€“ Mutuelle ENSPY (Front-End)



---

## ğŸŒ³ 1. Structure de Dossier

```
src/
â”œâ”€â”€ assets/
â”œâ”€â”€ components/
â”œâ”€â”€ constants/
â”‚    â”œâ”€â”€ api.ts
â”‚    â”œâ”€â”€ config.ts
â”‚    â””â”€â”€ strings.ts
â”œâ”€â”€ context/
â”‚    â”œâ”€â”€ AppContext.tsx
â”‚    â”œâ”€â”€ AuthContext.tsx
â”‚    â””â”€â”€ ThemeContext.tsx
â”œâ”€â”€ hooks/
â”‚    â”œâ”€â”€ useAssistance.ts
â”‚    â”œâ”€â”€ useAuth.ts
â”‚    â”œâ”€â”€ useConfig.ts
â”‚    â”œâ”€â”€ useDashboard.ts
â”‚    â”œâ”€â”€ useLoan.ts
â”‚    â”œâ”€â”€ useMember.ts
â”‚    â”œâ”€â”€ useRenflouement.ts
â”‚    â”œâ”€â”€ useSaving.ts
â”‚    â”œâ”€â”€ useSolidarity.ts
â”‚    â””â”€â”€ useUser.ts
â”œâ”€â”€ navigation/
â”œâ”€â”€ screens/
â”œâ”€â”€ services/
â”‚    â”œâ”€â”€ assistance.service.ts
â”‚    â”œâ”€â”€ auth.service.ts
â”‚    â”œâ”€â”€ config.service.ts
â”‚    â”œâ”€â”€ dashboard.service.ts
â”‚    â”œâ”€â”€ loan.service.ts
â”‚    â”œâ”€â”€ member.service.ts
â”‚    â”œâ”€â”€ renflouement.service.ts
â”‚    â”œâ”€â”€ saving.service.ts
â”‚    â”œâ”€â”€ solidarity.service.ts
â”‚    â””â”€â”€ user.service.ts
â”œâ”€â”€ styles/
â”œâ”€â”€ types/
â”‚    â”œâ”€â”€ assistance.types.ts
â”‚    â”œâ”€â”€ config.types.ts
â”‚    â”œâ”€â”€ dashboard.types.ts
â”‚    â”œâ”€â”€ exercise.types.ts
â”‚    â”œâ”€â”€ loan.types.ts
â”‚    â”œâ”€â”€ member.types.ts
â”‚    â”œâ”€â”€ renflouement.types.ts
â”‚    â”œâ”€â”€ saving.types.ts
â”‚    â”œâ”€â”€ session.types.ts
â”‚    â”œâ”€â”€ solidarity.types.ts
â”‚    â””â”€â”€ user.types.ts
â””â”€â”€ utils/
     â”œâ”€â”€ dateUtils.ts
     â”œâ”€â”€ formatters.ts
     â”œâ”€â”€ helpers.ts
     â”œâ”€â”€ numberUtils.ts
     â”œâ”€â”€ stringUtils.ts
     â””â”€â”€ validators.ts
```

---

## 2. ğŸ”— Constants

### api.ts
- **API_BASE_URL** : string (ex: "http://localhost:8000/api")
- **API_ENDPOINTS** : objet listant tous les endpoints de lâ€™API, dontâ€¯:
    - login, refresh, verify, me, updateProfile, changePassword
    - users, members, memberDetails(id), memberFullData(id)
    - configCurrent
    - exercises, exerciseCurrent
    - sessions, sessionCurrent
    - solidarityPayments, socialFundCurrent, socialFundHistory
    - savings
    - loans, loanStats, repayments
    - renflouements, renflouementStats, renflouementPayments
    - assistances, assistanceTypes
    - adminDashboard, adminMemberManagement, adminReports, adminCreateMember

### config.ts
- **COLORS** : Palette globale (primary, background, accent, grey, text, error, success, info)
- **PIN_LENGTH** : number
- **DEFAULT_SESSION_AGAPE** : number
- **SESSION_LIMIT_PER_MONTH** : number
- **DATE_FORMATS** : {api: string, display: string}
- **PAGINATION.pageSize** : number
- **ASYNC_STORAGE_KEYS** : {accessToken, refreshToken, currentUser, pin, config}

### strings.ts
- **STRINGS** : Tous les messages statiques, titres, labels, erreurs, prompts, etc.

---

## 3. âœï¸ Types TypeScript

### user.types.ts

- **UserRole** : "MEMBRE" | "ADMINISTRATEUR"
- **User** (interface)
    - id: string
    - username: string
    - email: string
    - first_name: string
    - last_name: string
    - telephone: string
    - role: UserRole
    - photo_profil: string | null
    - photo_profil_url: string | null
    - nom_complet: string
    - is_membre: boolean
    - is_administrateur: boolean
    - date_creation: string
    - date_modification: string
    - is_active: boolean

---

### member.types.ts

- **MemberStatus** : "EN_REGLE" | "NON_EN_REGLE" | "SUSPENDU"
- **Member** (interface)
    - id: string
    - utilisateur: User
    - numero_membre: string
    - date_inscription: string
    - statut: MemberStatus
    - exercice_inscription: string
    - exercice_inscription_nom: string
    - session_inscription: string
    - session_inscription_nom: string
    - is_en_regle: boolean
    - donnees_financieres: MemberFinancialData
    - date_creation: string
    - date_modification: string

- **MemberFinancialData** (interface)
    - inscription: { montant_total_inscription, montant_paye_inscription, montant_restant_inscription, inscription_complete, pourcentage_inscription }
    - solidarite: { montant_solidarite_session_courante, montant_paye_session_courante, montant_restant_session_courante, solidarite_session_courante_complete, total_solidarite_due, total_solidarite_payee, dette_solidarite_cumul, solidarite_a_jour }
    - epargne: { epargne_base, retraits_pour_prets, interets_recus, retours_remboursements, epargne_totale, epargne_plus_interets, montant_interets_separe }
    - emprunt: { a_emprunt_en_cours, montant_emprunt_en_cours, montant_total_a_rembourser, montant_deja_rembourse, montant_restant_a_rembourser, pourcentage_rembourse, montant_max_empruntable, nombre_emprunts_total }
    - renflouement: { total_renflouement_du, total_renflouement_paye, solde_renflouement_du, renflouement_a_jour, nombre_renflouements }
    - resume_financier: { patrimoine_total, obligations_totales, situation_nette }

---

### loan.types.ts

- **LoanStatus** : "EN_COURS" | "REMBOURSE" | "EN_RETARD"
- **Loan** (interface)
    - id: string
    - membre: string
    - membre_info: { id: string, numero_membre: string, nom_complet: string, email: string, statut: string }
    - montant_emprunte: number
    - taux_interet: number
    - montant_total_a_rembourser: number
    - montant_rembourse: number
    - montant_restant_a_rembourser: number
    - montant_interets: number
    - pourcentage_rembourse: number
    - session_emprunt: string
    - session_nom: string
    - date_emprunt: string
    - statut: LoanStatus
    - statut_display: string
    - notes: string
    - remboursements_details: Repayment[]

- **Repayment** (interface)
    - id: string
    - emprunt: string
    - emprunt_info: { id: string, membre_numero: string, membre_nom: string, montant_emprunte: number, montant_total_a_rembourser: number }
    - montant: number
    - montant_capital: number
    - montant_interet: number
    - session: string
    - session_nom: string
    - date_remboursement: string
    - notes: string

---

### saving.types.ts

- **SavingTransactionType** : "DEPOT" | "RETRAIT_PRET" | "INTERET"
- **SavingTransaction** (interface)
    - id: string
    - membre: string
    - membre_info: { id: string, numero_membre: string, nom_complet: string, email: string, statut: string }
    - type_transaction: SavingTransactionType
    - type_transaction_display: string
    - montant: number
    - session: string
    - session_nom: string
    - date_transaction: string
    - notes: string

---

### solidarity.types.ts

- **SolidarityPayment** (interface)
    - id: string
    - membre: string
    - membre_info: { id: string, numero_membre: string, nom_complet: string, email: string, statut: string }
    - session: string
    - session_nom: string
    - montant: number
    - date_paiement: string
    - notes: string

- **SocialFund** (interface)
    - id: string
    - exercice: string
    - exercice_nom: string
    - montant_total: number
    - mouvements_recents: SocialFundMovement[]
    - date_creation: string
    - date_modification: string

- **SocialFundMovement** (interface)
    - type_mouvement: "ENTREE" | "SORTIE"
    - montant: number
    - description: string
    - date_mouvement: string

---

### renflouement.types.ts

- **RenflouementCauseType** : "ASSISTANCE" | "COLLATION" | "AUTRE"
- **Renflouement** (interface)
    - id: string
    - membre: string
    - membre_info: { id: string, numero_membre: string, nom_complet: string, email: string, statut: string }
    - session: string
    - session_nom: string
    - montant_du: number
    - montant_paye: number
    - montant_restant: number
    - is_solde: boolean
    - pourcentage_paye: number
    - cause: string
    - type_cause: RenflouementCauseType
    - type_cause_display: string
    - date_creation: string
    - date_derniere_modification: string
    - paiements_details: RenflouementPayment[]

- **RenflouementPayment** (interface)
    - id: string
    - renflouement: string
    - renflouement_info: { id: string, membre_numero: string, membre_nom: string, montant_total_du: number, cause: string }
    - montant: number
    - session: string
    - session_nom: string
    - date_paiement: string
    - notes: string

---

### assistance.types.ts

- **AssistanceStatus** : "DEMANDEE" | "APPROUVEE" | "PAYEE" | "REJETEE"
- **Assistance** (interface)
    - id: string
    - membre: string
    - membre_info: { id: string, numero_membre: string, nom_complet: string, email: string, statut: string }
    - type_assistance: string
    - type_assistance_info: { id: string, nom: string, montant: number, description: string, actif: boolean, date_creation: string, date_modification: string }
    - montant: number
    - session: string
    - session_nom: string
    - date_demande: string
    - date_paiement: string | null
    - statut: AssistanceStatus
    - statut_display: string
    - justification: string
    - notes: string

---

### exercise.types.ts

- **ExerciseStatus** : "EN_COURS" | "TERMINEE"
- **Exercise** (interface)
    - id: string
    - nom: string
    - date_debut: string
    - date_fin: string
    - statut: ExerciseStatus
    - description: string
    - is_en_cours: boolean
    - nombre_sessions: number
    - fonds_social_info: { montant_total: number, derniere_modification: string }
    - date_creation: string
    - date_modification: string

---

### session.types.ts

- **SessionStatus** : "EN_COURS" | "TERMINEE"
- **Session** (interface)
    - id: string
    - exercice: string
    - exercice_nom: string
    - nom: string
    - date_session: string
    - montant_collation: number
    - statut: SessionStatus
    - description: string
    - is_en_cours: boolean
    - nombre_membres_inscrits: number
    - total_solidarite_collectee: number
    - renflouements_generes: number
    - date_creation: string
    - date_modification: string

---

### config.types.ts

- **MutuelleConfig** (interface)
    - id: string
    - montant_inscription: number
    - montant_solidarite: number
    - taux_interet: number
    - coefficient_emprunt_max: number
    - duree_exercice_mois: number
    - date_creation: string
    - date_modification: string

---

### dashboard.types.ts

- **DashboardData** (interface)
    - fonds_social: { montant_total: number, exercice: string, derniere_modification: string }
    - tresor: { cumul_total_epargnes: number, nombre_membres: number }
    - emprunts_en_cours: { nombre: number, montant_total_attendu: number }
    - situation_globale: { liquidites_totales: number, engagements_totaux: number }
    - derniers_paiements: { inscriptions: any[], solidarites: any[], remboursements: any[] }
    - alertes: { type: string, message: string, priorite: string, membre_id?: string, emprunt_id?: string }[]
    - activite_recente: { nouveaux_membres: number, nouveaux_emprunts: number, assistances_demandees: number, total_paiements: number }
    - membres_problematiques: any[]

---

## 4. ğŸ”Œ Services API (Signatures et Description)

Tous les services sont **asynchrones, typÃ©s, et alignÃ©s sur lâ€™API**.

### auth.service.ts
- **login(email, password): Promise<{tokens, user}>**
- **refreshToken(refresh): Promise<{access, refresh}>**
- **logout(): Promise<void>**
- **getStoredAccessToken(): Promise<string|null>**
- **getStoredRefreshToken(): Promise<string|null>**
- **getStoredUser(): Promise<User|null>**
- **updateProfile(updates: Partial<User>, accessToken: string): Promise<User>**
- **changePassword(old_password, new_password, new_password_confirm, accessToken): Promise<void>**

### user.service.ts
- **fetchUsers(accessToken): Promise<User[]>**
- **fetchUserById(id, accessToken): Promise<User>**
- **createUser(user: Partial<User>, accessToken): Promise<User>**

### member.service.ts
- **fetchMembers(accessToken, params?): Promise<Member[]>**
- **fetchMemberById(id, accessToken): Promise<Member>**
- **fetchMemberFullData(id, accessToken): Promise<any>**

### dashboard.service.ts
- **fetchAdminDashboard(accessToken): Promise<DashboardData>**

### loan.service.ts
- **fetchLoans(accessToken, params?): Promise<Loan[]>**
- **fetchLoanById(id, accessToken): Promise<Loan>**
- **createLoan(payload, accessToken): Promise<Loan>**
- **fetchRepayments(accessToken, params?): Promise<Repayment[]>**
- **createRepayment(payload, accessToken): Promise<Repayment>**

### saving.service.ts
- **fetchSavings(accessToken, params?): Promise<SavingTransaction[]>**
- **createSaving(payload, accessToken): Promise<SavingTransaction>**

### solidarity.service.ts
- **fetchSolidarityPayments(accessToken, params?): Promise<SolidarityPayment[]>**
- **createSolidarityPayment(payload, accessToken): Promise<SolidarityPayment>**
- **fetchSocialFundCurrent(accessToken): Promise<SocialFund>**

### renflouement.service.ts
- **fetchRenflouements(accessToken, params?): Promise<Renflouement[]>**
- **fetchRenflouementStats(accessToken): Promise<any>**
- **createRenflouementPayment(payload, accessToken): Promise<RenflouementPayment>**

### assistance.service.ts
- **fetchAssistances(accessToken, params?): Promise<Assistance[]>**
- **createAssistance(payload, accessToken): Promise<Assistance>**
- **updateAssistance(id, payload: Partial<Assistance>, accessToken): Promise<Assistance>**
- **fetchAssistanceTypes(accessToken): Promise<any[]>**

### config.service.ts
- **fetchConfigCurrent(accessToken): Promise<MutuelleConfig>**

---

## 5. ğŸª Hooks MÃ©tier (Signatures, ClÃ©s de Query, Retours)

### useAuth.ts
- **useAuth()**  
    - .login({email, password}): Promise<{tokens, user}>
    - .logout(): Promise<void>
    - .isLoading: boolean
    - .error: any
    - .currentUserQuery

- **useCurrentUser(): Query<User|null>**

- **usePin()**
    - .pin: string|null
    - .isPinSet: boolean
    - .savePin(pin: string): Promise<void>
    - .verifyPin(pin: string): Promise<boolean>
    - .removePin(): Promise<void>

- **useUpdateProfile()**  
    - .mutateAsync({updates, accessToken})

- **useChangePassword()**  
    - .mutateAsync({old_password, new_password, new_password_confirm, accessToken})

---

### useConfig.ts
- **useMutuelleConfig(): Query<MutuelleConfig>**

---

### useDashboard.ts
- **useAdminDashboard(): Query<DashboardData>**

---

### useMember.ts
- **useMembers(params?): Query<Member[]>**
- **useMemberDetail(id): Query<Member>**
- **useMemberFinance(id): Query<any>**

---

### useUser.ts
- **useUsers(params?): Query<User[]>**
- **useUserDetail(id): Query<User>**
- **useCreateUser(): Mutation**

---

### useLoan.ts
- **useLoans(params?): Query<Loan[]>**
- **useLoanDetail(id): Query<Loan>**
- **useRepayments(params?): Query<Repayment[]>**
- **useCreateLoan(): Mutation**
- **useCreateRepayment(): Mutation**

---

### useSaving.ts
- **useSavings(params?): Query<SavingTransaction[]>**
- **useCreateSaving(): Mutation**

---

### useSolidarity.ts
- **useSolidarityPayments(params?): Query<SolidarityPayment[]>**
- **useCreateSolidarityPayment(): Mutation**
- **useSocialFundCurrent(): Query<SocialFund>**

---

### useRenflouement.ts
- **useRenflouements(params?): Query<Renflouement[]>**
- **useRenflouementStats(): Query<any>**
- **useCreateRenflouementPayment(): Mutation**

---

### useAssistance.ts
- **useAssistances(params?): Query<Assistance[]>**
- **useCreateAssistance(): Mutation**
- **useUpdateAssistance(): Mutation**
- **useAssistanceTypes(): Query<any[]>**

---

## 6. ğŸŒ Context Providers

### AuthContext.tsx
- Fournit :  
    - user: User|null
    - isLoading: boolean
    - login(email, password): Promise<void>
    - logout(): Promise<void>
- Hook associÃ©â€¯: **useAuthContext()**

### ThemeContext.tsx
- Fournit :  
    - colors: typeof COLORS
- Hook associÃ©â€¯: **useTheme()**

### AppContext.tsx
- Fournit :  
    - isAppLoading: boolean
    - setAppLoading(loading: boolean): void
    - showToast(msg: string, type?: "success"|"error"|"info"): void
- Hook associÃ©â€¯: **useAppContext()**

---

## 7. ğŸ§° Utils & Helpers (Signatures et FonctionnalitÃ©s)

### formatters.ts
- **formatMoney(amount: number, currency = "FCFA"): string**
- **formatDate(date: string|Date, withHour = false): string**
- **formatPercent(value: number, digits?: number): string**

### dateUtils.ts
- **isSameMonth(dateA, dateB): boolean**
- **isToday(date): boolean**

### validators.ts
- **isEmail(email: string): boolean**
- **isPhone(phone: string): boolean**
- **isRequired(val: any): boolean**
- **isPositiveNumber(val: any): boolean**

### numberUtils.ts
- **round(value: number, decimals = 2): number**

### stringUtils.ts
- **normalizeSearch(text: string): string**

### helpers.ts
- **getMemberStatusLabel(status: MemberStatus): string**
- **getLoanStatusLabel(status: LoanStatus): string**

---

## 8. ğŸ“ RÃ¨gles & Patterns

- **AUCUN champ nâ€™est omis dans les types.**
- **TOUTES les fonctions utilitaires, hooks, services, contextes sont listÃ©es avec leur signature.**
- **TOUT ajout/modification doit Ãªtre rÃ©percutÃ© dans cette doc.**
- **AUCUNE donnÃ©e mockÃ©e, AUCUNE fonction inventÃ©e nâ€™est autorisÃ©e.**
- **AUCUN "etc." nâ€™est utilisÃ© dans les descriptions de types/fonctions.**

---

## 9. ğŸ“Œ SynthÃ¨se

- **Cette doc est la rÃ©fÃ©rence unique**â€¯: tout dev ou IA lâ€™utilise pour garantir lâ€™exhaustivitÃ© et la cohÃ©rence.
- **Chaque structure, type, service, hook, context, utilitaire, constante est explicitement listÃ© ici.**
- **Tout ajout, suppression ou modification doit Ãªtre signalÃ© et intÃ©grÃ© dans cette doc.**

---

**Fin de la documentation technique exhaustive de la stack front Mutuelle ENSPY.**
